<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Peraturan</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/vue@3"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
  <!-- Peraturan Start -->
  <div id="peraturan" class="container border-0 p-3 mt-4">
    <div class="container card bg-secondary-subtle border-0 rounded-4 d-flex flex-column p-4"
    data-aos="fade-up" 
    data-aos-delay="50" 
    data-aos-once="true">
      <h4 class="text-center"><i class="bi bi-journal-bookmark-fill me-2"></i>Peraturan Bupati</h4>
      
      <!-- Tampilkan hanya 1 item berdasarkan idData tertentu -->
      <div v-if="selectedPeraturan" class="peraturan-card card border-0 rounded-4 shadow-sm p-3 mt-4">
        <a :href="selectedPeraturan.urlDetailPeraturan" class="text-decoration-none">
          <h5 class="livvic fw-semibold">{{ selectedPeraturan.jenis }} {{ selectedPeraturan.namaKldi }} Nomor {{ selectedPeraturan.noPeraturan }} Tahun {{ selectedPeraturan.tahun_pengundangan }}</h5>
        </a>
        <p class="mb-1">Tentang {{ selectedPeraturan.judul }}</p>
        <div class="d-flex">
          <small class="me-2">
            <span class="badge text-bg-success fw-normal">{{ selectedPeraturan.subjek }}</span>
          </small>
        </div>

        <div class="d-flex mt-2">
          <small class="livvic fw-medium" style="font-size: clamp(8px, 1vw + 2px, 12px);">
            Status: 
              <span class="livvic fw-medium" style="font-size: clamp(8px, 1vw + 2px, 12px);" 
              :class="selectedPeraturan.status === 'berlaku' ? 'text-success' : 'text-danger'">
                {{ selectedPeraturan.status === 'berlaku' ? 'Berlaku' : 'Tidak Berlaku' }}
              </span>
          </small>
          <ul class="d-flex align-items-center ms-auto">
            <li class="d-flex align-items-center">
              <a :href="selectedPeraturan.urlDownload" target="_blank">
                <img src="assets/img/download-file.gif" class="card border-0 me-2" style="height: 40px;" alt="">
              </a>
              <a :href="selectedPeraturan.urlDetailPeraturan">
                <img src="assets/img/file-info.gif" class="card border-0" style="height: 40px;" alt="">
              </a>
            </li>
          </ul>
        </div>
      </div>

    </div>
  </div>
  <!-- Peraturan End -->

    <!-- Bootstrap 5 JS (opsional) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      const { createApp, ref, onMounted, computed } = Vue;

      createApp({
        setup() {
          const peraturans = ref([]); // Menyimpan data JSON
          const selectedId = 'idData_yang_diinginkan'; // Ganti dengan idData yang diinginkan
          
          const fetchData = async () => {
            try {
              const response = await axios.get('https://jonkolong.github.io/jdih/public/data/peraturan.json'); // Lokasi file JSON
              peraturans.value = response.data["Peraturan Bupati"]; // Simpan data ke peraturanBupati
            } catch (error) {
              console.error("Gagal mengambil data:", error);
            }
          };

          const selectedPeraturan = computed(() => {
            return peraturans.value.find(item => item.idData === selectedId); // Mencari item berdasarkan idData
          });

          onMounted(() => {
            fetchData(); // Ambil data saat komponen dimuat
          });

          return {
            peraturans,
            selectedPeraturan
          };
        }
      }).mount('#peraturan');
    </script>
</body>
</html>
