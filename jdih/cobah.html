
<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Survei</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>

<body>
    <div id="app">
        <div class="card p-4">

            <h5>Profil</h5>

            <!-- Jenis kelamin start -->
            <div :class="['form-control', { 'is-invalid': errors.jenis_kelamin }]">
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="jenis_kelamin" id="laki-laki" value="Laki-laki"
                    v-model="formData.jenis_kelamin">
                    <label class="form-check-label" for="laki-laki">
                        Laki-laki
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="jenis_kelamin" id="perempuan" value="Perempuan"
                    v-model="formData.jenis_kelamin">
                    <label class="form-check-label" for="perempuan">
                        Perempuan
                    </label>
                </div>
            
            </div>
            <!-- Error handling -->
            <div v-if="errors.jenis_kelamin" class="invalid-feedback">
                <div v-for="(error, index) in errors.jenis_kelamin" :key="index">
                    {{ error }}
                </div>
            </div>
            <!-- Jenis kelamin end -->

            <!-- Usia start -->
            <div :class="['form-control', { 'is-invalid': errors.jenis_kelamin }]">
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="jenis_kelamin" id="laki-laki" value="Laki-laki"
                    v-model="formData.jenis_kelamin">
                    <label class="form-check-label" for="laki-laki">
                        Laki-laki
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="jenis_kelamin" id="perempuan" value="Perempuan"
                    v-model="formData.jenis_kelamin">
                    <label class="form-check-label" for="perempuan">
                        Perempuan
                    </label>
                </div>
            
            </div>
            <!-- Error handling -->
            <div v-if="errors.jenis_kelamin" class="invalid-feedback">
                <div v-for="(error, index) in errors.jenis_kelamin" :key="index">
                    {{ error }}
                </div>
            </div>
            <!-- Usia end -->

        </div>

        <label for="kritik" class="form-label">Kritik</label>
        <input type="text" class="form-control" :class="{ 'is-invalid': errors.kritik }" id="kritik" v-model="formData.kritik">
        <div v-if="errors.kritik" class="invalid-feedback">
            <div v-for="(error, index) in errors.kritik" :key="index">
                {{ error }}
            </div>
        </div>

        <button type="button" class="btn btn-success" @click="submitForm">Kirim</button>
    </div>

    <script src="https://unpkg.com/vue@3"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
        const { createApp, ref } = Vue;

        createApp({
            setup() {
                const formData = ref({
                    jenis_kelamin: '',
                    kritik: ''
                });

                const errors = ref({});

                const submitForm = async () => {
                    try {
                        const response = await axios.post('https://website.kickymaulana.com/api/survei/input', formData.value);
                        alert('Data berhasil dikirim');
                        formData.value.jenis_kelamin = '';
                        formData.value.kritik = '';
                        errors.value = {}; // Reset errors after successful submission
                    } catch (error) {
                        if (error.response && error.response.data.errors) {
                            errors.value = error.response.data.errors;
                        } else {
                            console.error('Gagal mengirim data', error);
                        }
                    }
                };

                return {
                    formData,
                    errors,
                    submitForm
                };
            }
        }).mount('#app');
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
</body>

</html>
